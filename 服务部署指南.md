# 服务部署指南

## 基础环境介绍

本项目使用 NodeJs+MongoDB 搭建
|环境名称|版本要求|备注|
|--|--|--|
|NodeJs|20.X||
|Pnpm|latest||
|MongoDB|latest||

NodeJS ：[下载地址](https://nodejs.org/)
MongoDB ：[下载地址](https://www.mongodb.com/)
Pnpm

1. 安装好 NodJs 后打开命令行工具
2. 输入以下命令：npm install pnpm -g --registry=https://registry.npmmirror.com
3. 即可安装 pnpm

## 前台服务

1. 打开源代码
2. 启动命令行工具到项目根目录
3. 执行 pnpm install --registry=https://registry.npmmirror.com
4. 等待执行完毕
5. 执行 pnpm run build 即可构建源代码

## 后台服务

1. 打开源代码
2. 启动命令行工具到项目根目录
3. 执行 pnpm install --registry=https://registry.npmmirror.com
4. 等待执行完毕
5. 执行 pnpm run build 即可构建源代码

> Q:如何更换服务器 ip？
> A:打开文件 runtime.ts=>修改 address 字段即可

## 服务端

1. 打开源代码
2. 启动命令行工具到项目根目录
3. 执行 pnpm install --registry=https://registry.npmmirror.com
4. 等待执行完毕
5. 执行 pnpm run build 即可构建源代码
6. 执行 pnpm run start:prod 即可启动服务端；

> Q:如何更换服务端的绑定端口 ip？
> A:打开文件 src/constants/index.ts=>修改 HttpsPort、HttpPort 字段即可
>
> Q:如何更换数据库？
> A:打开文件 src/config/database.ts => mongoDB
>
> Q:OSS 配置调整？
> A:打开文件 src/constants/index.ts => OssConfig

## 数据库

初始化创建一个用户即可；
相关命令：

```sh
mongosh admin
db.createUser({ user:'root',pwd:'123456',roles:[{role:'userAdminAnyDatabase', db: 'admin'},"readWriteAnyDatabase"]});
```

上面账号密码自行设置，务必复杂；
